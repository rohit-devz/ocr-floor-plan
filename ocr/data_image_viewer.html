<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Image Viewer</title>
  <style>
    :root {
      --bg: #f2f4f7;
      --panel: #ffffff;
      --text: #17212f;
      --muted: #5c6776;
      --accent: #1463ff;
      --border: #d9dee6;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(120deg, #eef2f8, #f7f8fb);
      color: var(--text);
      min-height: 100vh;
    }
    .layout {
      display: grid;
      grid-template-columns: 380px 1fr;
      min-height: 100vh;
      gap: 16px;
      padding: 16px;
    }
    .left, .right {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    .left {
      display: flex;
      flex-direction: column;
    }
    .left h1 {
      margin: 0;
      padding: 14px 16px;
      font-size: 18px;
      border-bottom: 1px solid var(--border);
      background: #f8faff;
    }
    .list {
      overflow-y: auto;
      padding: 10px;
      display: grid;
      gap: 8px;
    }
    .item {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      transition: border-color 0.15s ease, background 0.15s ease;
      background: #fff;
    }
    .item:hover {
      border-color: #b8c9ff;
      background: #f8fbff;
    }
    .item.active {
      border-color: var(--accent);
      background: #eef4ff;
    }
    .path {
      font-size: 12px;
      color: var(--muted);
      word-break: break-word;
      margin-bottom: 6px;
    }
    .meta {
      font-size: 13px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .right {
      display: grid;
      grid-template-rows: auto 1fr;
    }
    .header {
      border-bottom: 1px solid var(--border);
      padding: 14px 16px;
      background: #f8faff;
    }
    .header .title {
      font-size: 14px;
      color: var(--muted);
      word-break: break-all;
    }
    .viewer {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 14px;
      background: #f5f7fb;
    }
    .viewer img {
      max-width: 100%;
      max-height: calc(100vh - 120px);
      width: auto;
      height: auto;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #fff;
      object-fit: contain;
    }
    .empty {
      color: var(--muted);
      font-size: 14px;
    }
    @media (max-width: 980px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .viewer img {
        max-height: 62vh;
      }
    }
  </style>
</head>
<body>
  <div class="layout">
    <section class="left">
      <h1>data_image.json</h1>
      <div id="list" class="list"></div>
    </section>
    <section class="right">
      <div class="header">
        <div id="selectedPath" class="title">Select an item from the left panel</div>
      </div>
      <div class="viewer" id="viewer">
        <div class="empty">No image selected</div>
      </div>
    </section>
  </div>

  <script id="embeddedData" type="application/json">
[
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/1100Columbia_Floorplan_Images_Hackney.png",
    "length": 12.1,
    "bredth": 22.2,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/1538392373_Shree_Sai_Iscon_Heights_3_BHK_Floor_Plan.jpeg",
    "length": 9.1,
    "bredth": 10.6,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/15421073700_Sobha_Garnet_3.jpeg",
    "length": 9.2,
    "bredth": 12.2,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/1542107700_Sobha_Garnet_3.jpeg",
    "length": 9.2,
    "bredth": 12.2,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/1559370530_Dwarkadhish_Casa_Romana_3_BHk_Floor_Plan.jpeg",
    "length": 7.11,
    "bredth": 11.2,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/1578116618_rah_2bhk1.jpeg",
    "length": 10.0,
    "bredth": 7.7,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/1578116618_rah_3bhk1.jpeg",
    "length": 10.6,
    "bredth": 8.6,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/28651-364617-770x400.jpg",
    "length": 7.8,
    "bredth": 10,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/28651-64890-floor-plan-770x400.jpg",
    "length": 7.8,
    "bredth": 10,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/C1.jpg",
    "length": 9.4,
    "bredth": 7.3,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/Jupiter-Commanders-Glory-1010sqft-floor-plan.jpg",
    "length": 10.0,
    "bredth": 9,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/What-is-a-floor-plan-with-dimensions.png",
    "length": null,
    "bredth": null,
    "square_feet": "85 sq ft",
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/example-floor-plan.jpg",
    "length": null,
    "bredth": null,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/f1a811641c63c0e7efd435db7fb7816c.jpg",
    "length": 10,
    "bredth": 9,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/floor.png",
    "length": 8.0,
    "bredth": 10,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/floor2.png",
    "length": 6.6,
    "bredth": 6.0,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/floor4.jpg",
    "length": 6.0,
    "bredth": 10,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/floor5.jpg",
    "length": 9.4,
    "bredth": 7.3,
    "unit": "feet"
  },
  {
    "image_path": "/home/rohit/Desktop/work/floor_images/sattva3-forest-ridge-3-bhk-apartment-floor-plan.webp",
    "length": 11.11,
    "bredth": 8,
    "unit": "feet"
  }
]
  </script>

  <script>
    const listEl = document.getElementById("list");
    const viewerEl = document.getElementById("viewer");
    const selectedPathEl = document.getElementById("selectedPath");
    const embeddedDataEl = document.getElementById("embeddedData");
    let selectedCard = null;

    function showItem(item) {
      selectedPathEl.textContent = item.image_path || "No path";
      viewerEl.innerHTML = "";

      const img = document.createElement("img");
      const path = item.image_path || "";
      img.src = path.startsWith("file://") ? path : `file://${path}`;
      img.alt = path || "image";
      img.onerror = () => {
        viewerEl.innerHTML = '<div class="empty">Image could not be loaded. Verify image_path exists on this machine.</div>';
      };
      viewerEl.appendChild(img);
    }

    function makeCard(item, index) {
      const card = document.createElement("div");
      card.className = "item";
      card.innerHTML = `
        <div class="path">${item.image_path || ""}</div>
        <div class="meta">
          <span>length: ${item.length ?? "null"}</span>
          <span>bredth: ${item.bredth ?? "null"}</span>
          <span>unit: ${item.unit ?? "null"}</span>
        </div>
      `;
      card.addEventListener("click", () => {
        if (selectedCard) selectedCard.classList.remove("active");
        selectedCard = card;
        selectedCard.classList.add("active");
        showItem(item);
      });
      if (index === 0) {
        selectedCard = card;
        card.classList.add("active");
        showItem(item);
      }
      return card;
    }

    let data = [];
    try {
      data = JSON.parse(embeddedDataEl.textContent || "[]");
    } catch {
      data = [];
    }

    if (!Array.isArray(data) || data.length === 0) {
      listEl.innerHTML = '<div class="empty">No data found in embedded data_image.json content.</div>';
    } else {
      data.forEach((item, index) => listEl.appendChild(makeCard(item, index)));
    }
  </script>
</body>
</html>
